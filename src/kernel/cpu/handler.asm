	[bits 32]
	global asm_inthandler, asm_into_inthandler, interrput_exit
	extern inthandler
	section .text
	
asm_inthandler_main:
	push ds
	push es
	push fs
	push gs
	pusha
	mov ax, ss                   ; 这三行里必须要有 因为从 v86 到这里，必须要切换段寄存器
	mov ds, ax                   ; 不要像我一样看不开 kvm 没必要切换就删掉 QwQ
	mov es, ax
	mov ecx, dword [esp + 13 * 4]; arg1 <== id
	mov edx, esp                 ; arg2 <== regs
	call inthandler              ; void inthandler(i32 id, regs32 * regs) __attribute__((fastcall));
	popa
	pop gs
	pop fs
	pop es
	pop ds
	add esp, 8                   ; pop error code and interrupt number
	iret
asm_into_inthandler:          ; 参见 handlergen.py
	push 0
	jmp short asm_inthandler_main
asm_inthandler:
	dd 0xf5e9006a, 0x6affffff, 0xffeee901, 0x026affff, 0xffffe7e9, 0xe9036aff, 0xffffffe0, 0xd9e9046a
	dd 0x6affffff, 0xffd2e905, 0x066affff, 0xffffcbe9, 0xe9076aff, 0xffffffc4, 0xbfe9086a, 0x6affffff
	dd 0xffb6e909, 0x0a6affff, 0xffffb1e9, 0xe90b6aff, 0xffffffaa, 0xa3e90c6a, 0x6affffff, 0xff9ce90d
	dd 0x0e6affff, 0xffff95e9, 0xe90f6aff, 0xffffff8c, 0x85e9106a, 0x6affffff, 0xff80e911, 0x126affff
	dd 0xffff77e9, 0xe9136aff, 0xffffff70, 0x69e9146a, 0x6affffff, 0xff64e915, 0x166affff, 0xffff5be9
	dd 0xe9176aff, 0xffffff54, 0x4de9186a, 0x6affffff, 0xff46e919, 0x1a6affff, 0xffff3fe9, 0xe91b6aff
	dd 0xffffff38, 0x31e91c6a, 0x6affffff, 0xff2ce91d, 0x1e6affff, 0xffff25e9, 0xe91f6aff, 0xffffff1c
	dd 0x15e9206a, 0x6affffff, 0xff0ee921, 0x226affff, 0xffff07e9, 0xe9236aff, 0xffffff00, 0xf9e9246a
	dd 0x6afffffe, 0xfef2e925, 0x266affff, 0xfffeebe9, 0xe9276aff, 0xfffffee4, 0xdde9286a, 0x6afffffe
	dd 0xfed6e929, 0x2a6affff, 0xfffecfe9, 0xe92b6aff, 0xfffffec8, 0xc1e92c6a, 0x6afffffe, 0xfebae92d
	dd 0x2e6affff, 0xfffeb3e9, 0xe92f6aff, 0xfffffeac, 0xa5e9306a, 0x6afffffe, 0xfe9ee931, 0x326affff
	dd 0xfffe97e9, 0xe9336aff, 0xfffffe90, 0x89e9346a, 0x6afffffe, 0xfe82e935, 0x366affff, 0xfffe7be9
	dd 0xe9376aff, 0xfffffe74, 0x6de9386a, 0x6afffffe, 0xfe66e939, 0x3a6affff, 0xfffe5fe9, 0xe93b6aff
	dd 0xfffffe58, 0x51e93c6a, 0x6afffffe, 0xfe4ae93d, 0x3e6affff, 0xfffe43e9, 0xe93f6aff, 0xfffffe3c
	dd 0x35e9406a, 0x6afffffe, 0xfe2ee941, 0x426affff, 0xfffe27e9, 0xe9436aff, 0xfffffe20, 0x19e9446a
	dd 0x6afffffe, 0xfe12e945, 0x466affff, 0xfffe0be9, 0xe9476aff, 0xfffffe04, 0xfde9486a, 0x6afffffd
	dd 0xfdf6e949, 0x4a6affff, 0xfffdefe9, 0xe94b6aff, 0xfffffde8, 0xe1e94c6a, 0x6afffffd, 0xfddae94d
	dd 0x4e6affff, 0xfffdd3e9, 0xe94f6aff, 0xfffffdcc, 0xc5e9506a, 0x6afffffd, 0xfdbee951, 0x526affff
	dd 0xfffdb7e9, 0xe9536aff, 0xfffffdb0, 0xa9e9546a, 0x6afffffd, 0xfda2e955, 0x566affff, 0xfffd9be9
	dd 0xe9576aff, 0xfffffd94, 0x8de9586a, 0x6afffffd, 0xfd86e959, 0x5a6affff, 0xfffd7fe9, 0xe95b6aff
	dd 0xfffffd78, 0x71e95c6a, 0x6afffffd, 0xfd6ae95d, 0x5e6affff, 0xfffd63e9, 0xe95f6aff, 0xfffffd5c
	dd 0x55e9606a, 0x6afffffd, 0xfd4ee961, 0x626affff, 0xfffd47e9, 0xe9636aff, 0xfffffd40, 0x39e9646a
	dd 0x6afffffd, 0xfd32e965, 0x666affff, 0xfffd2be9, 0xe9676aff, 0xfffffd24, 0x1de9686a, 0x6afffffd
	dd 0xfd16e969, 0x6a6affff, 0xfffd0fe9, 0xe96b6aff, 0xfffffd08, 0x01e96c6a, 0x6afffffd, 0xfcfae96d
	dd 0x6e6affff, 0xfffcf3e9, 0xe96f6aff, 0xfffffcec, 0xe5e9706a, 0x6afffffc, 0xfcdee971, 0x726affff
	dd 0xfffcd7e9, 0xe9736aff, 0xfffffcd0, 0xc9e9746a, 0x6afffffc, 0xfcc2e975, 0x766affff, 0xfffcbbe9
	dd 0xe9776aff, 0xfffffcb4, 0xade9786a, 0x6afffffc, 0xfca6e979, 0x7a6affff, 0xfffc9fe9, 0xe97b6aff
	dd 0xfffffc98, 0x91e97c6a, 0x6afffffc, 0xfc8ae97d, 0x7e6affff, 0xfffc83e9, 0xe97f6aff, 0xfffffc7c
	dd 0x75e9806a, 0x6afffffc, 0xfc6ee981, 0x826affff, 0xfffc67e9, 0xe9836aff, 0xfffffc60, 0x59e9846a
	dd 0x6afffffc, 0xfc52e985, 0x866affff, 0xfffc4be9, 0xe9876aff, 0xfffffc44, 0x3de9886a, 0x6afffffc
	dd 0xfc36e989, 0x8a6affff, 0xfffc2fe9, 0xe98b6aff, 0xfffffc28, 0x21e98c6a, 0x6afffffc, 0xfc1ae98d
	dd 0x8e6affff, 0xfffc13e9, 0xe98f6aff, 0xfffffc0c, 0x05e9906a, 0x6afffffc, 0xfbfee991, 0x926affff
	dd 0xfffbf7e9, 0xe9936aff, 0xfffffbf0, 0xe9e9946a, 0x6afffffb, 0xfbe2e995, 0x966affff, 0xfffbdbe9
	dd 0xe9976aff, 0xfffffbd4, 0xcde9986a, 0x6afffffb, 0xfbc6e999, 0x9a6affff, 0xfffbbfe9, 0xe99b6aff
	dd 0xfffffbb8, 0xb1e99c6a, 0x6afffffb, 0xfbaae99d, 0x9e6affff, 0xfffba3e9, 0xe99f6aff, 0xfffffb9c
	dd 0x95e9a06a, 0x6afffffb, 0xfb8ee9a1, 0xa26affff, 0xfffb87e9, 0xe9a36aff, 0xfffffb80, 0x79e9a46a
	dd 0x6afffffb, 0xfb72e9a5, 0xa66affff, 0xfffb6be9, 0xe9a76aff, 0xfffffb64, 0x5de9a86a, 0x6afffffb
	dd 0xfb56e9a9, 0xaa6affff, 0xfffb4fe9, 0xe9ab6aff, 0xfffffb48, 0x41e9ac6a, 0x6afffffb, 0xfb3ae9ad
	dd 0xae6affff, 0xfffb33e9, 0xe9af6aff, 0xfffffb2c, 0x25e9b06a, 0x6afffffb, 0xfb1ee9b1, 0xb26affff
	dd 0xfffb17e9, 0xe9b36aff, 0xfffffb10, 0x09e9b46a, 0x6afffffb, 0xfb02e9b5, 0xb66affff, 0xfffafbe9
	dd 0xe9b76aff, 0xfffffaf4, 0xede9b86a, 0x6afffffa, 0xfae6e9b9, 0xba6affff, 0xfffadfe9, 0xe9bb6aff
	dd 0xfffffad8, 0xd1e9bc6a, 0x6afffffa, 0xfacae9bd, 0xbe6affff, 0xfffac3e9, 0xe9bf6aff, 0xfffffabc
	dd 0xb5e9c06a, 0x6afffffa, 0xfaaee9c1, 0xc26affff, 0xfffaa7e9, 0xe9c36aff, 0xfffffaa0, 0x99e9c46a
	dd 0x6afffffa, 0xfa92e9c5, 0xc66affff, 0xfffa8be9, 0xe9c76aff, 0xfffffa84, 0x7de9c86a, 0x6afffffa
	dd 0xfa76e9c9, 0xca6affff, 0xfffa6fe9, 0xe9cb6aff, 0xfffffa68, 0x61e9cc6a, 0x6afffffa, 0xfa5ae9cd
	dd 0xce6affff, 0xfffa53e9, 0xe9cf6aff, 0xfffffa4c, 0x45e9d06a, 0x6afffffa, 0xfa3ee9d1, 0xd26affff
	dd 0xfffa37e9, 0xe9d36aff, 0xfffffa30, 0x29e9d46a, 0x6afffffa, 0xfa22e9d5, 0xd66affff, 0xfffa1be9
	dd 0xe9d76aff, 0xfffffa14, 0x0de9d86a, 0x6afffffa, 0xfa06e9d9, 0xda6affff, 0xfff9ffe9, 0xe9db6aff
	dd 0xfffff9f8, 0xf1e9dc6a, 0x6afffff9, 0xf9eae9dd, 0xde6affff, 0xfff9e3e9, 0xe9df6aff, 0xfffff9dc
	dd 0xd5e9e06a, 0x6afffff9, 0xf9cee9e1, 0xe26affff, 0xfff9c7e9, 0xe9e36aff, 0xfffff9c0, 0xb9e9e46a
	dd 0x6afffff9, 0xf9b2e9e5, 0xe66affff, 0xfff9abe9, 0xe9e76aff, 0xfffff9a4, 0x9de9e86a, 0x6afffff9
	dd 0xf996e9e9, 0xea6affff, 0xfff98fe9, 0xe9eb6aff, 0xfffff988, 0x81e9ec6a, 0x6afffff9, 0xf97ae9ed
	dd 0xee6affff, 0xfff973e9, 0xe9ef6aff, 0xfffff96c, 0x65e9f06a, 0x6afffff9, 0xf95ee9f1, 0xf26affff
	dd 0xfff957e9, 0xe9f36aff, 0xfffff950, 0x49e9f46a, 0x6afffff9, 0xf942e9f5, 0xf66affff, 0xfff93be9
	dd 0xe9f76aff, 0xfffff934, 0x2de9f86a, 0x6afffff9, 0xf926e9f9, 0xfa6affff, 0xfff91fe9, 0xe9fb6aff
	dd 0xfffff918, 0x11e9fc6a, 0x6afffff9, 0xf90ae9fd, 0xfe6affff, 0xfff903e9, 0xe9ff6aff, 0xfffff8fc
	
interrput_exit:
	popa
	pop gs
	pop fs
	pop es
	pop ds
	iret
